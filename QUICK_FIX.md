# üîß –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ Cython/pyjnius

## –ü—Ä–æ–±–ª–µ–º–∞
–û—à–∏–±–∫–∞: `undeclared name not builtin: long` –≤ jnius_utils.pxi

## –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
./buildozer_fixed.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É:**
   ```bash
   buildozer android release
   ```

2. **–ö–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è –æ—à–∏–±–∫–∞, –≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:**
   ```bash
   ./fix_pyjnius_long.py
   ```

3. **–ò–ª–∏ –≤—Ä—É—á–Ω—É—é –Ω–∞–π–¥–∏—Ç–µ –∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ —Ñ–∞–π–ª:**
   ```bash
   # –ù–∞–π—Ç–∏ —Ñ–∞–π–ª
   find ~/.buildozer -name "jnius_utils.pxi"
   
   # –ò—Å–ø—Ä–∞–≤–∏—Ç—å (–∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å –Ω–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã–π)
   sed -i 's/isinstance(arg, long)/isinstance(arg, int)/g' ~/.buildozer/.../jnius_utils.pxi
   ```

4. **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ —Å–±–æ—Ä–∫—É:**
   ```bash
   buildozer android release
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

–í—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ –≤ `buildozer.spec`:
```ini
android.archs = arm64-v8a
```

–≠—Ç–æ —É—Å–∫–æ—Ä–∏—Ç —Å–±–æ—Ä–∫—É –∏ —É–º–µ–Ω—å—à–∏—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–æ–∫.

## –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

Python-for-android —Å–∫–∞—á–∏–≤–∞–µ—Ç pyjnius –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–¥ –¥–ª—è Python 2 (`long` —Ç–∏–ø). –í Python 3 —Ç–∏–ø `long` –æ–±—ä–µ–¥–∏–Ω–µ–Ω —Å `int`, –ø–æ—ç—Ç–æ–º—É Cython 3.x –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç `long`.

## –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ —Ñ–∞–π–ª –±—É–¥–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –≤ –∫–µ—à–µ, –∏ —Å–ª–µ–¥—É—é—â–∏–µ —Å–±–æ—Ä–∫–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –±–µ–∑ –ø—Ä–æ–±–ª–µ–º.


